version: '2'

services:
  wildcat:
    extends:
      file: ./docker-compose.yml
      service: wildcat
    build:
      context: .
      args:
        JSPM_GITHUB_AUTH_TOKEN:
    links:
      - "static:static.example.localhost"
    ports:
      - "3000:3000"
    entrypoint: "npm run"
    command: "prod"

  static:
    extends:
      file: ./docker-compose.yml
      service: wildcat
    build:
      context: .
      args:
        JSPM_GITHUB_AUTH_TOKEN:
    environment: 
      STATIC_HOST: static.example.localhost
    ports:
      - "4000:4000"
    entrypoint: "npm run"
    command: "prod-static"
     
